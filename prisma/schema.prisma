// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

enum FamilyStatus {
  ACTIVE
  INACTIVE
  PENDING
}

model Familys {
  id                String          @id @default(auto()) @map("_id") @db.ObjectId
  name              String
  CPF               String
  RG                String
  email             String
  phone             String
  city              String
  neighborhood      String
  number            String
  state             String
  street            String
  zip_code          String
  notes             String?
  createdAt         DateTime        @default(now())
  updatedAt         DateTime        @default(now())
  status            FamilyStatus    @default(PENDING)
  createdByUserId   String
  createdByUserName String
  dependents        Dependent[]
  periodBenefit     PeriodBenefit[]
}

model Dependent {
  id                   String   @id @default(auto()) @map("_id") @db.ObjectId
  name_dependent       String
  CPF_dependent        String
  date_birth_dependent DateTime
  income_dependent     String
  familyId             String   @db.ObjectId
  family               Familys  @relation(fields: [familyId], references: [id], onDelete: Cascade)
}

model PeriodBenefit {
  id        String   @id @default(auto()) @map("_id") @db.ObjectId
  startDate DateTime
  endDate   DateTime
  familyId  String   @db.ObjectId
  family    Familys  @relation(fields: [familyId], references: [id], onDelete: Cascade)
}
